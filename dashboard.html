<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSTI Final - Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <aside id="sidebar">
        <div class="sidebar-header">
            <div class="logo">RSTI<span>Final</span></div>
            <button id="closeSidebar" class="btn-close">‚úï</button>
        </div>
        <nav>
            <a href="#" class="nav-link active" data-target="dash">üìä <span>Dash</span></a>
            <a href="#" class="nav-link" data-target="clientes">üë• <span>Clientes</span></a>
            <a href="#" class="nav-link" data-target="demandas">üî• <span>Demandas</span></a>
            <a href="#" class="nav-link" data-target="entregas">üì¶ <span>Entregas</span></a>
            <a href="#" class="nav-link" data-target="config">‚öôÔ∏è <span>Config</span></a>
        </nav>
        <div class="user-profile">
            <div class="avatar">AD</div>
            <div class="info">
                <strong id="userName">Admin</strong>
            </div>
            <button id="logoutBtn" style="
                width: 100%;
                margin-top: 12px;
                padding: 10px;
                background: rgba(244, 63, 94, 0.1);
                border: 1px solid rgba(244, 63, 94, 0.3);
                color: #f43f5e;
                border-radius: 8px;
                font-size: 0.85rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s;
            ">üö™ Sair</button>
        </div>
    </aside>

    <main>
        <header>
            <div class="header-left">
                <button id="toggleSidebar" class="btn-toggle">‚ò∞</button>
                <h1 id="page-title">Vis√£o Geral</h1>
            </div>
            <div class="actions">
                <button id="theme">üåô</button>
                <button class="btn-new" id="btnNewDemand">Ôºã Novo</button>
            </div>
        </header>

        <section id="dash" class="tab-content active">
            <div class="grid">
                <div class="card metric">
                    <div>
                        <h3>Andamento</h3>
                        <div class="val good">12</div>
                    </div>
                    <div class="trend up">‚Üó 12%</div>
                </div>

                <div class="card metric">
                    <div>
                        <h3>Atrasados</h3>
                        <div class="val warning">3</div>
                    </div>
                    <div class="trend down">‚Üò 7%</div>
                </div>

                <div class="card metric">
                    <div>
                        <h3>Conclu√≠dos</h3>
                        <div class="val success">8</div>
                    </div>
                    <div class="trend up">‚Üó 24%</div>
                </div>

                <div class="card metric">
                    <div>
                        <h3>Cancelados</h3>
                        <div class="val danger">1</div>
                    </div>
                    <div class="trend neutral">‚û° 0%</div>
                </div>

                <div class="card col-3">
                    <div class="card-head"><h3>Demandas Ativas</h3></div>
                    <div id="bars" class="bars"></div>
                </div>

                <div class="card col-2">
                    <div class="card-head"><h3>Status Geral</h3></div>
                    <div class="donut-wrap">
                        <div id="donut"></div>
                        <div id="legend" class="legend"></div>
                    </div>
                </div>

                <div class="card col-3">
                    <div class="card-head"><h3>Pr√≥ximas Entregas</h3></div>
                    <div class="list">
                        <div class="item">
                            <div class="icon purple">IG</div>
                            <div class="desc">
                                <b>Instagram Post</b>
                                <small>31/04/26 ‚Ä¢ Social</small>
                            </div>
                            <div class="badge success">ATIVO</div>
                        </div>
                        <div class="item">
                            <div class="icon blue">BN</div>
                            <div class="desc">
                                <b>Banner Site</b>
                                <small>02/06/26 ‚Ä¢ Design</small>
                            </div>
                            <div class="badge success">ATIVO</div>
                        </div>
                    </div>
                </div>

                <div class="card col-2">
                    <div class="card-head"><h3 class="danger">Aten√ß√£o</h3></div>
                    <div class="list">
                        <div class="item">
                            <div class="desc">
                                <b>Natal Campaign</b>
                                <small class="danger">Atrasada h√° 5 dias</small>
                            </div>
                            <span class="badge danger">URGENTE</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="clientes" class="tab-content">
            <div class="card">
                <div class="list">
                    <div class="item"><div class="desc"><b>Empresa A</b><small>Ativo</small></div></div>
                    <div class="item"><div class="desc"><b>Empresa B</b><small>Inativo</small></div></div>
                    <div class="item"><div class="desc"><b>Empresa C</b><small>Ativo</small></div></div>
                </div>
            </div>
        </section>

        <section id="demandas" class="tab-content">
            <div class="card">
                <h3>Gerenciar Demandas</h3>
                <p style="margin-top:10px;color:var(--text-muted)">Conte√∫do da aba demandas...</p>
            </div>
        </section>

        <section id="entregas" class="tab-content">
            <div class="card">
                <h3>Hist√≥rico de Entregas</h3>
                <p style="margin-top:10px;color:var(--text-muted)">Conte√∫do da aba entregas...</p>
            </div>
        </section>

        <section id="config" class="tab-content">
            <div class="card">
                <h3>Configura√ß√µes do Sistema</h3>
                <p style="margin-top:10px;color:var(--text-muted)">Prefer√™ncias de usu√°rio, notifica√ß√µes, etc.</p>
            </div>
        </section>
    </main>

    <!-- MODAL NOVA DEMANDA -->
    <div id="modalDemand" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ú® Nova Demanda</h2>
                <button class="modal-close" id="closeModal">‚úï</button>
            </div>
            
            <form id="formDemand" class="modal-body">
                <div class="form-group">
                    <label for="titulo">T√≠tulo da Demanda</label>
                    <input type="text" id="titulo" placeholder="Ex: Cria√ß√£o de Post Instagram" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="tipo">Tipo de Servi√ßo</label>
                        <select id="tipo" required>
                            <option value="">Selecione...</option>
                            <option value="social">üì± Social Media</option>
                            <option value="design">üé® Design</option>
                            <option value="copy">‚úçÔ∏è Copywriting</option>
                            <option value="video">üé• V√≠deo</option>
                            <option value="seo">üîç SEO</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="cliente">Cliente</label>
                        <select id="cliente" required>
                            <option value="">Selecione...</option>
                            <option value="empresa-a">Empresa A</option>
                            <option value="empresa-b">Empresa B</option>
                            <option value="empresa-c">Empresa C</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="orcamento">Or√ßamento (R$)</label>
                        <input type="number" id="orcamento" placeholder="0,00" step="0.01" min="0">
                    </div>

                    <div class="form-group">
                        <label for="dataEntrega">Data de Entrega</label>
                        <input type="date" id="dataEntrega" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="descricao">Descri√ß√£o</label>
                    <textarea id="descricao" rows="4" placeholder="Descreva os detalhes da demanda..."></textarea>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn-cancel" id="btnCancel">Cancelar</button>
                    <button type="submit" class="btn-submit">üöÄ Criar Demanda</button>
                </div>
            </form>
        </div>
    </div>

    <script>
// ==========================================
// ELEMENTOS DO DOM
// ==========================================
const sidebar = document.getElementById('sidebar');
const toggleBtn = document.getElementById('toggleSidebar');
const closeBtn = document.getElementById('closeSidebar');
const themeBtn = document.getElementById('theme');
const pageTitle = document.getElementById('page-title');
const navLinks = document.querySelectorAll('.nav-link');
const tabContents = document.querySelectorAll('.tab-content');

// Modal
const modal = document.getElementById('modalDemand');
const btnNewDemand = document.getElementById('btnNewDemand');
const closeModal = document.getElementById('closeModal');
const btnCancel = document.getElementById('btnCancel');
const formDemand = document.getElementById('formDemand');

// ==========================================
// SIDEBAR TOGGLE
// ==========================================
toggleBtn.addEventListener('click', () => {
    sidebar.classList.remove('hidden');
});

closeBtn.addEventListener('click', () => {
    sidebar.classList.add('hidden');
});

// Fechar sidebar ao clicar fora (mobile)
document.addEventListener('click', (e) => {
    if (window.innerWidth <= 840) {
        if (!sidebar.contains(e.target) && !toggleBtn.contains(e.target)) {
            sidebar.classList.add('hidden');
        }
    }
});

// ==========================================
// NAVEGA√á√ÉO ENTRE TABS
// ==========================================
navLinks.forEach(link => {
    link.addEventListener('click', (e) => {
        e.preventDefault();
        
        const target = link.getAttribute('data-target');
        
        navLinks.forEach(l => l.classList.remove('active'));
        link.classList.add('active');
        
        tabContents.forEach(tab => {
            tab.classList.remove('active');
            if (tab.id === target) {
                tab.classList.add('active');
            }
        });
        
        const titles = {
            'dash': 'Vis√£o Geral',
            'clientes': 'Clientes',
            'demandas': 'Demandas',
            'entregas': 'Entregas',
            'config': 'Configura√ß√µes'
        };
        pageTitle.textContent = titles[target] || 'Dashboard';
        
        if (window.innerWidth <= 840) {
            sidebar.classList.add('hidden');
        }
    });
});

// ==========================================
// TEMA DARK/LIGHT
// ==========================================
themeBtn.addEventListener('click', () => {
    document.body.classList.toggle('light');
    const isLight = document.body.classList.contains('light');
    localStorage.setItem('theme', isLight ? 'light' : 'dark');
    themeBtn.textContent = isLight ? '‚òÄÔ∏è' : 'üåô';
});

// Carregar tema salvo
window.addEventListener('DOMContentLoaded', () => {
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'light') {
        document.body.classList.add('light');
        themeBtn.textContent = '‚òÄÔ∏è';
    }
});

// ==========================================
// MODAL
// ==========================================
btnNewDemand.addEventListener('click', () => {
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
});

closeModal.addEventListener('click', closeModalHandler);
btnCancel.addEventListener('click', closeModalHandler);
modal.querySelector('.modal-overlay').addEventListener('click', closeModalHandler);

function closeModalHandler() {
    modal.classList.remove('active');
    document.body.style.overflow = '';
    formDemand.reset();
}

document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal.classList.contains('active')) {
        closeModalHandler();
    }
});

// ==========================================
// SUBMIT FORMUL√ÅRIO
// ==========================================
formDemand.addEventListener('submit', (e) => {
    e.preventDefault();
    
    const formData = {
        titulo: document.getElementById('titulo').value,
        tipo: document.getElementById('tipo').value,
        cliente: document.getElementById('cliente').value,
        orcamento: document.getElementById('orcamento').value,
        dataEntrega: document.getElementById('dataEntrega').value,
        descricao: document.getElementById('descricao').value
    };
    
    console.log('Nova demanda:', formData);
    showToast('Demanda criada com sucesso! üöÄ', 'success');
    closeModalHandler();
});

// ==========================================
// GR√ÅFICO DE BARRAS
// ==========================================
function createBarChart() {
    const barsContainer = document.getElementById('bars');
    if (!barsContainer) return;
    
    const data = [
        { label: 'Social', value: 12 },
        { label: 'Design', value: 8 },
        { label: 'Copy', value: 15 },
        { label: 'V√≠deo', value: 6 },
        { label: 'SEO', value: 10 }
    ];
    
    const maxValue = Math.max(...data.map(d => d.value));
    barsContainer.innerHTML = '';
    
    data.forEach(item => {
        const barGroup = document.createElement('div');
        barGroup.className = 'bar-group';
        
        const bar = document.createElement('div');
        bar.className = 'bar';
        bar.style.height = `${(item.value / maxValue) * 100}%`;
        bar.setAttribute('data-val', item.value);
        
        const label = document.createElement('div');
        label.className = 'lbl';
        label.textContent = item.label;
        
        barGroup.appendChild(bar);
        barGroup.appendChild(label);
        barsContainer.appendChild(barGroup);
    });
}

// ==========================================
// GR√ÅFICO DONUT
// ==========================================
function createDonutChart() {
    const donutContainer = document.getElementById('donut');
    const legendContainer = document.getElementById('legend');
    
    if (!donutContainer || !legendContainer) return;
    
    const data = [
        { label: 'Andamento', value: 12, color: '#6366f1' },
        { label: 'Conclu√≠dos', value: 8, color: '#10b981' },
        { label: 'Atrasados', value: 3, color: '#fbbf24' },
        { label: 'Cancelados', value: 1, color: '#f43f5e' }
    ];
    
    const total = data.reduce((sum, item) => sum + item.value, 0);
    let currentAngle = 0;
    
    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    svg.setAttribute('viewBox', '0 0 100 100');
    
    const radius = 40;
    const innerRadius = 28;
    const centerX = 50;
    const centerY = 50;
    
    data.forEach(item => {
        const percentage = item.value / total;
        const angle = percentage * 360;
        
        const path = createDonutSegment(
            centerX, centerY, radius, innerRadius, 
            currentAngle, currentAngle + angle, item.color
        );
        
        svg.appendChild(path);
        currentAngle += angle;
    });
    
    donutContainer.innerHTML = '';
    donutContainer.appendChild(svg);
    
    legendContainer.innerHTML = '';
    data.forEach(item => {
        const legItem = document.createElement('div');
        legItem.className = 'leg-item';
        legItem.innerHTML = `
            <span><span class="dot" style="background:${item.color}"></span>${item.label}</span>
            <b>${item.value}</b>
        `;
        legendContainer.appendChild(legItem);
    });
}

function createDonutSegment(cx, cy, r, innerR, startAngle, endAngle, color) {
    const startRad = (startAngle - 90) * Math.PI / 180;
    const endRad = (endAngle - 90) * Math.PI / 180;
    
    const x1 = cx + r * Math.cos(startRad);
    const y1 = cy + r * Math.sin(startRad);
    const x2 = cx + r * Math.cos(endRad);
    const y2 = cy + r * Math.sin(endRad);
    
    const x3 = cx + innerR * Math.cos(endRad);
    const y3 = cy + innerR * Math.sin(endRad);
    const x4 = cx + innerR * Math.cos(startRad);
    const y4 = cy + innerR * Math.sin(startRad);
    
    const largeArc = endAngle - startAngle > 180 ? 1 : 0;
    
    const pathData = [
        `M ${x1} ${y1}`,
        `A ${r} ${r} 0 ${largeArc} 1 ${x2} ${y2}`,
        `L ${x3} ${y3}`,
        `A ${innerR} ${innerR} 0 ${largeArc} 0 ${x4} ${y4}`,
        'Z'
    ].join(' ');
    
    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    path.setAttribute('d', pathData);
    path.setAttribute('fill', color);
    
    return path;
}

// ==========================================
// TOAST NOTIFICATIONS
// ==========================================
function showToast(message, type = 'success') {
    const existingToast = document.querySelector('.toast');
    if (existingToast) existingToast.remove();
    
    const toast = document.createElement('div');
    toast.className = `toast toast-${type}`;
    toast.textContent = message;
    
    Object.assign(toast.style, {
        position: 'fixed',
        top: '20px',
        right: '20px',
        padding: '16px 24px',
        borderRadius: '12px',
        fontWeight: '600',
        fontSize: '0.9rem',
        zIndex: '10000',
        animation: 'slideInRight 0.3s ease-out',
        boxShadow: '0 10px 30px rgba(0,0,0,0.3)',
        backdropFilter: 'blur(10px)',
        border: '1px solid rgba(255,255,255,0.1)'
    });
    
    if (type === 'success') {
        toast.style.background = 'rgba(16, 185, 129, 0.2)';
        toast.style.color = '#10b981';
        toast.style.borderColor = 'rgba(16, 185, 129, 0.4)';
    } else {
        toast.style.background = 'rgba(244, 63, 94, 0.2)';
        toast.style.color = '#f43f5e';
        toast.style.borderColor = 'rgba(244, 63, 94, 0.4)';
    }
    
    if (!document.querySelector('#toast-animations')) {
        const style = document.createElement('style');
        style.id = 'toast-animations';
        style.textContent = `
            @keyframes slideInRight {
                from { opacity: 0; transform: translateX(100px); }
                to { opacity: 1; transform: translateX(0); }
            }
            @keyframes slideOutRight {
                from { opacity: 1; transform: translateX(0); }
                to { opacity: 0; transform: translateX(100px); }
            }
        `;
        document.head.appendChild(style);
    }
    
    document.body.appendChild(toast);
    
    setTimeout(() => {
        toast.style.animation = 'slideOutRight 0.3s ease-out';
        setTimeout(() => toast.remove(), 300);
    }, 3000);
}

// ==========================================
// INICIALIZAR
// ==========================================
window.addEventListener('DOMContentLoaded', () => {
    createBarChart();
    createDonutChart();
    
    const cards = document.querySelectorAll('.card');
    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        setTimeout(() => {
            card.style.transition = 'all 0.6s ease-out';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, index * 50);
    });
});

// ==========================================
// RESPONSIVIDADE
// ==========================================
window.addEventListener('resize', () => {
    if (window.innerWidth > 840) {
        sidebar.classList.remove('hidden');
    } else {
        sidebar.classList.add('hidden');
    }
});
    </script>
</body>
</html>